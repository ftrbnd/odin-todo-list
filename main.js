(()=>{"use strict";function e(){const e=document.querySelector("form#new-project");console.log("newProjectButton click"),e.style.display?e.removeAttribute("style"):e.style.display="flex"}function t(){const e=document.querySelector("form#new-item");console.log("newItemButton click"),e.style.display?e.removeAttribute("style"):e.style.display="flex"}class o{constructor(e,t){this.title=e,this.description=t,this.items=[]}}function n(e){const t=document.createElement("div");t.classList.add("item");const o=document.createElement("h3");o.textContent=e.title,o.classList.add("title");const n=document.createElement("h4");n.textContent=e.description,n.style.fontStyle="italic",n.style.fontWeight="normal",n.classList.add("desc");const l=document.createElement("h4");l.textContent=`Due date: ${e.dueDate}`,l.style.fontWeight="normal",l.classList.add("dueDate");const r=document.createElement("h4");return r.textContent=`Priority level: ${e.priority}`,r.style.fontWeight="normal",r.classList.add("priority"),t.appendChild(o),t.appendChild(n),t.appendChild(l),t.appendChild(r),t.addEventListener("click",c),t}function c(e){e.stopPropagation(),console.log(`${e.target.tagName} was selected`)}class l{constructor(e,t,o=new Date,n=1){this.title=e,this.description=t,this.dueDate=o||new Date,this.priority=n||1}}!function(){const e=document.querySelector("div#header"),t=document.createElement("h1");t.textContent="Todo List",e.appendChild(t)}(),function(){const t=document.querySelector("div#projects"),o=document.querySelector("form#new-project"),n=document.createElement("div");n.setAttribute("id","projects-header");const c=document.createElement("h2");c.textContent="My Projects",n.appendChild(c);const l=document.createElement("button");let r;l.id="new-project",l.textContent="New",l.addEventListener("click",e),n.appendChild(l),t.insertBefore(n,o),document.createElement("div").id="projects-list";try{r=localStorage.getItem("user-projects").split(",")}catch(e){return console.log("localStorage found no projects.")}for(const e of r);}(),function(){const e=document.querySelector("div#default"),o=document.querySelector("form#new-item"),n=document.createElement("div");n.setAttribute("id","main-project");const c=document.createElement("h2"),l=localStorage.getItem("default-project-name");c.textContent=l||"Default Project",n.appendChild(c);const r=document.createElement("p"),s=localStorage.getItem("default-project-desc");r.textContent=s||"This is your default project";const i=document.createElement("button");i.id="new-item",i.textContent="New",n.appendChild(r),i.addEventListener("click",t),n.appendChild(i),e.insertBefore(n,o);const d=document.createElement("div");let a;d.setAttribute("id","todo-items"),e.appendChild(d);try{a=localStorage.getItem("default-project-items").split(",")}catch(e){return console.log("localStorage found no items.")}for(const e of a);}(),function(){const e=document.querySelector("div#projects"),t=document.querySelector("form#new-project");t.addEventListener("submit",(c=>{c.preventDefault();const l=[...new FormData(c.target).entries()],r=new o(l[0][1],l[1][1]);let s;console.log("Created a new project: ",r);try{s=localStorage.getItem("user-projects").split(",").length+1,console.log(`New project id = ${s}`)}catch(c){s=1,console.log("localStorage couldn't set the project id.")}localStorage.setItem(`project-${s}-name`,r.name),localStorage.setItem(`project-${s}-desc`,r.description),localStorage.setItem(`project-${s}-items`,r.items.join(","));const i=localStorage.getItem("user-projects")+`,${s}`;localStorage.setItem("user-projects",i),e.appendChild(function(e){const t=document.createElement("div");t.classList.add("project");const o=document.createElement("h3");o.textContent=e.title,o.classList.add("title");const c=document.createElement("h4");return c.textContent=e.description,c.classList.add("desc"),t.appendChild(o),t.appendChild(c),t.addEventListener("click",(()=>{console.log(`${e.title} was selected`),document.querySelector("#main-project > h2").textContent=e.title;const t=document.querySelector("div#todo-items");if(0==e.items.length){for(;t.firstChild;)t.removeChild(t.firstChild);return console.log(`${e.title} has no items`)}for(const o of e.items)t.appendChild(n(o))})),t}(r)),console.log("Local storage now: ",localStorage),t.reset(),t.removeAttribute("style")}))}(),function(){const e=document.querySelector("div#default"),t=document.querySelector("form#new-item");t.addEventListener("submit",(o=>{o.preventDefault();const c=[...new FormData(o.target).entries()];console.log(c);const r=new l(c[0][1],c[1][1],c[2][1],c[3][1]);console.log(r),e.appendChild(n(r)),t.reset(),t.removeAttribute("style")}))}()})();