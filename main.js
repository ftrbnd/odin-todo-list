(()=>{"use strict";class e{constructor(e,t){this.title=e,this.description=t,this.items=[]}}function t(e){const t=document.createElement("div");t.classList.add("item");const c=document.createElement("h3");c.textContent=e.title,c.classList.add("title");const n=document.createElement("h4");n.textContent=e.description,n.style.fontStyle="italic",n.style.fontWeight="normal",n.classList.add("desc");const l=document.createElement("h4");l.textContent=`Due date: ${e.dueDate}`,l.style.fontWeight="normal",l.classList.add("dueDate");const r=document.createElement("h4");return r.textContent=`Priority level: ${e.priority}`,r.style.fontWeight="normal",r.classList.add("priority"),t.appendChild(c),t.appendChild(n),t.appendChild(l),t.appendChild(r),t.addEventListener("click",o),t}function o(e){e.stopPropagation(),console.log(`${e.target.tagName} was selected`)}function c(e){const o=document.createElement("div");o.classList.add("project");const c=document.createElement("h3");c.textContent=e.title,c.classList.add("title");const n=document.createElement("h4");return n.textContent=e.description,n.classList.add("desc"),o.appendChild(c),o.appendChild(n),o.addEventListener("click",(()=>{console.log(`Project "${e.title}" was selected`),document.querySelector("#main-project > h2").textContent=e.title;let o=document.querySelector("div#todo-items");if(localStorage.setItem("main-project-id",localStorage.getItem("user-projects").length),0==e.items.length){for(o=document.querySelector("div#todo-items");o.firstChild;)o.removeChild(o.firstChild);document.querySelector("#main-project > p").textContent="This project has no items",console.log(`${e.title} has no items`)}else for(const c of e.items)o.appendChild(t(c))})),o}function n(){const e=document.querySelector("form#new-project");console.log("newProjectButton click"),e.style.display?e.removeAttribute("style"):e.style.display="flex"}function l(){const e=document.querySelector("form#new-item");console.log("newItemButton click"),e.style.display?e.removeAttribute("style"):e.style.display="flex"}class r{constructor(e,t,o=new Date,c=1){this.title=e,this.description=t,this.dueDate=o||new Date,this.priority=c||1}}!function(){const e=document.querySelector("div#header"),t=document.createElement("h1");t.textContent="Todo List",e.appendChild(t)}(),function(){const t=document.querySelector("div#projects"),o=document.querySelector("form#new-project"),l=document.createElement("div");l.setAttribute("id","projects-header");const r=document.createElement("h2");r.textContent="My Projects",l.appendChild(r);const s=document.createElement("button");s.id="new-project",s.textContent="New",s.addEventListener("click",n),l.appendChild(s),t.insertBefore(l,o);const i=document.createElement("div");let a;i.id="projects-list",t.appendChild(i);try{a=localStorage.getItem("user-projects").split(",")}catch(e){return console.log("localStorage found no projects.")}console.log(`projects to load: ${a}`);for(const t of a)"null"!=t&&(console.log(`cur project: ${t}`),i.appendChild(c(new e(localStorage.getItem(`project-${t}-name`),localStorage.getItem(`project-${t}-desc`)))))}(),function(){const e=document.querySelector("div#default"),t=document.querySelector("form#new-item"),o=document.createElement("div");o.setAttribute("id","main-project");const c=document.createElement("h2"),n=localStorage.getItem("default-project-name");c.textContent=n||"Default Project",o.appendChild(c);const r=document.createElement("p"),s=localStorage.getItem("default-project-desc");r.textContent=s||"This is your default project";const i=document.createElement("button");i.id="new-item",i.textContent="New",o.appendChild(r),i.addEventListener("click",l),o.appendChild(i),e.insertBefore(o,t);const a=document.createElement("div");let d;a.setAttribute("id","todo-items"),e.appendChild(a);try{d=localStorage.getItem("default-project-items").split(",")}catch(e){return console.log("localStorage found no items.")}for(const e of d);}(),function(){const t=document.querySelector("div#projects-list"),o=document.querySelector("form#new-project");o.addEventListener("submit",(n=>{n.preventDefault();const l=[...new FormData(n.target).entries()],r=new e(l[0][1],l[1][1]);let s;console.log("Created a new project: ",r);try{s=localStorage.getItem("user-projects").split(",").length+1,console.log(`New project id = ${s}`)}catch(n){s=1,console.log("localStorage couldn't set the project id.")}localStorage.setItem(`project-${s}-name`,r.title),localStorage.setItem(`project-${s}-desc`,r.description),localStorage.setItem(`project-${s}-items`,r.items.join(","));const i=localStorage.getItem("user-projects")+`,${s}`;localStorage.setItem("user-projects",i),t.appendChild(c(r)),console.log("Local storage after adding project: ",localStorage),o.reset(),o.removeAttribute("style")}))}(),function(){const e=document.querySelector("div#default"),o=document.querySelector("form#new-item");o.addEventListener("submit",(c=>{c.preventDefault();const n=[...new FormData(c.target).entries()],l=new r(n[0][1],n[1][1],n[2][1],n[3][1]);console.log("Created a new todo item: ",l);const s=localStorage.getItem("main-project-id");let i;console.log(`New item was created under project id #${s}`);try{i=localStorage.getItem(`project-${s}-items`).split(",").length+1,console.log(`New item id = ${i}`)}catch(c){i=1,console.log("Local storage couldn't set the item id.")}localStorage.setItem(`project-${s}-item-${i}-name`,l.title),localStorage.setItem(`project-${s}-item-${i}-desc`,l.description),localStorage.setItem(`project-${s}-item-${i}-dueDate`,l.dueDate),localStorage.setItem(`project-${s}-item-${i}-priority`,l.priority);const a=localStorage.getItem(`project-${s}-items`)+`,${i}`;localStorage.setItem(`project-${s}-items`,a),e.appendChild(t(l)),console.log("Local storage after adding item: ",localStorage),o.reset(),o.removeAttribute("style")}))}()})();